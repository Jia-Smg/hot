import mph
import sys

def construct_cross_shape_model(model, model_name, sample):
    model = model.java

    model.param().set("d1", str(sample[0]) + "[m]")
    model.param().set("d2", str(sample[1]) + "[m]")
    model.param().set("d3", str(sample[2]) + "[m]")
    model.param().set("d4", str(sample[3]) + "[m]")
    model.param().set("d5", str(sample[4]) + "[m]")
    model.param().set("d6", str(sample[5]) + "[m]")
    model.param().set("d7", str(sample[6]) + "[m]")
    model.param().set("d8", str(sample[7]) + "[m]")
    model.param().set("d9", str(sample[8]) + "[m]")
    model.param().set("d10", str(sample[9]) + "[m]")
    model.param().set("d11", str(sample[10]) + "[m]")
    model.param().set("d12", str(sample[11]) + "[m]")
    model.param().set("d", "1[m]")

    model.save(model_name)

# 50, 250
# [0.11951656216580417, 0.5399060499556124, 0.3405773878785834, 0.07523273172768732, 0.5399975991246223, 0.3847696691476904, 0.010012952090853702, 0.5399747908085336, 0.45001225710061266, 0.10959140653507787, 0.018001043558245132, 0.872407549906677, 1] 40.16594566591082 252.47133886916424
# sample = [0.16972632166461013, 0.2427544430201582, 0.5875192353152316, 0.035464631970480914, 0.18747466653283437, 0.7770607014966847, 0.1668090053569085, 0.44236726550665684, 0.3908237291364347, 0.027726484266100436, 0.025549269384058642, 0.9467242463498409, 1] 
# sample = [0.02341084916456855, 0.5858411535820554, 0.39074799725337606, 0.47437720302128633, 0.04759075303273069, 0.47803204394598303, 0.30529503318837264, 0.6111320668345159, 0.08357289997711147, 0.3944028381780728, 0.20730510414282438, 0.39829205767910275, 1] 
# sample = [0.11716960402838178, 0.5842371252002746, 0.29859327077134357, 0.47620096131837947, 0.06223208972304872, 0.46156694895857175, 0.38165117875944155, 0.48035614557106887, 0.13799267566948958, 0.3630766765850309, 0.17742915999084463, 0.4594941634241245, 1] 
# sample = [0.01, 0.9144911879148546, 0.07550881208514533, 0.49, 0.020000000000000018, 0.49, 0.09677866788738841, 0.8932213321126116, 0.01, 0.49, 0.020000000000000018, 0.49, 1]
# sample = [0.4883593499656672, 0.029170061799038693, 0.4824705882352941, 0.4860448615243763, 0.2144243533989471, 0.2995307850766766, 0.29069764248111696, 0.40424902723735406, 0.305053330281529, 0.4577509727626459, 0.054526894026092954, 0.4877221332112612, 1] 
# sample = [0.49, 0.020000000000000018, 0.49, 0.49, 0.32595925841153583, 0.18404074158846417, 0.48999267566948956, 0.020395513847562385, 0.48961181048294805, 0.43474525062943464, 0.07530601968413819, 0.4899487296864271, 1] 
# sample = [0.01, 0.9000256351567865, 0.08997436484321354, 0.49, 0.020000000000000018, 0.49, 0.11178622110322728, 0.8782137788967728, 0.01, 0.49, 0.020000000000000018, 0.49, 1]
sample = [0.01, 0.8655866330968185, 0.1244133669031815, 0.49, 0.020000000000000018, 0.49, 0.13765575646601053, 0.8523442435339894, 0.01, 0.49, 0.020000000000000018, 0.49, 1]

mph.option('session', 'stand-alone')
client = mph.start(cores=1)
client.caching(False)
# model_name = 'cross-shape-horizontal'
model_name = 'cross-shape-diff-vertical'
model = client.load('../model_data_generation/models/'+ model_name  + '.mph')

# 238.17585537099066 44.69699638689098
# 212.41762183854598 52.52106927350576
#  361.3450286347377 52.12569039116825
# 21.52799951782841 44.01292480697877
# 10.81033024439474 45.79096927927935
#  355.4366208540663 47.65991619533144
#  343.5482105676338 40.14166221053981
construct_cross_shape_model(model, model_name + '_343' + '_40' + '.mph', sample)

sys.stdout.flush()

# to free up memory
model.clear()
model.reset()
